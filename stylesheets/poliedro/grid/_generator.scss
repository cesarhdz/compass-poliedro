/** poliedro/grid/generator */

@import "poliedro/grid/variables";

// Poliedro Coun abstraction
@mixin abstract-column{
	display: inline-block;

	// Borrowed from Twitter Bootstrap
	position: relative;
	min-height: 1px;
	
	// Can be variable if RTL support is needed
	float: left;
}

%poliedro-column{
	@include abstract-column;
}



@function get_column_width($size, $gutter, $columnNumber: 12, $precision: 0){
	$gutterTotal: ($columnNumber - 1) * $gutter;
	$columnWidth: ((100 - ($gutterTotal * 100)) / $columnNumber) / 100;

	$result: ($columnWidth * $size) + (($size - 1) * $gutter);

	@return percentage($result) - ($precision / 10);
}
 
@mixin poliedro-column($size, $gutter, $columnNumber){
	width: get_column_width($size, $gutter, $columnNumber);

	@if($gutter){
		margin-right:percentage($gutter);
	}
}

@mixin poliedro-omega{

	clear:right;
	margin-right:0;

	// Instead of clearing flost to the element, the following element
	// will be clear right
	// + * { clear:left; }

}


@mixin poliedro-grid($prefix, $gutter, $columns: 12, $padding: 0){
	
	$gutter: $gutter / 100;
	$abstract-column: #{$prefix}-abstract-column;

	// Abstract column
	#{$abstract-column}{
		@include abstract-column;
	}

	// Base columns
	@for $i from 1 through $columns{
		#{$prefix}-#{$i}{
			@extend #{$abstract-column};
			@include poliedro-column($i, $gutter, $columns);
		}

		// Offset helper
		#{$prefix}-#{$poliedro-offset-prefix}#{$i}{
			margin-left: get_column_width($i, $gutter, $columns);
		}
	}

	// Omega column
	#{$prefix}-#{$poliedro-omega-suffix}{
		@include poliedro-omega();
	}

}